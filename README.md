

OLX Command Center
1. Цел на проекта

Основната цел на OLX Command Center е да предостави мощен, централизиран уеб интерфейс за управление на комуникацията с клиенти в OLX. Проектът надхвърля простата автоматизация и се стреми да създаде инструмент, който улеснява обработката на съобщения, помага при формулирането на отговори чрез AI и дава възможност за анализ на комуникацията.

Системата е проектирана като "агент на повикване", където човешкият оператор запазва пълен контрол, но има на разположение мощни AI инструменти, за да оптимизира и ускори работата си.

2. Основни функционалности

Централизиран Чат Интерфейс: Преглежда всички разговори от OLX в удобен двуколонен изглед, подобен на стандартните чат приложения.

AI Асистент за отговори: Генерира предложения за отговори с едно натискане на бутон, като използва пълния контекст на разговора и информация за обявата. Операторът може да редактира отговора преди изпращане.

AI Анализатор на разговори: Позволява на оператора да "разпитва" AI за съдържанието на текущия разговор (напр. "Какъв е телефонният номер на клиента?", "Съгласи ли се на цената?").

Групови съобщения: Дава възможност за избор на множество разговори и изпращане на едно и също съобщение до всички избрани потребители.

Управление на AI: Позволява лесна промяна и запазване на системния промпт, който AI използва, за да се адаптира към специфичния тон и стил на комуникация.

3. Архитектура

Проектът е изграден върху "serverless" архитектура, която е евтина за поддръжка и лесна за разгръщане. Състои се от три основни компонента:

Frontend (Потребителски интерфейс):

Технология: HTML, CSS и JavaScript (Vanilla JS), хостнат безплатно на GitHub Pages.

Роля: Това е визуалният интерфейс, който потребителят вижда и използва в браузъра си. Той не съдържа чувствителна информация и комуникира с бекенда чрез API заявки.

Backend (API Сървър):

Технология: Cloudflare Worker.

Роля: Сърцето на системата. Този Worker действа като сигурен посредник между интерфейса и външните услуги. Той:

Обработва OAuth2 оторизацията с OLX.

Сигурно съхранява и опреснява API токените.

Приема заявки от интерфейса.

Комуникира с OLX Partner API и Google Gemini API.

Използва Cloudflare KV като мини база данни за съхранение на токени и системния промпт.

Външни услуги:

OLX Partner API: За достъп до разговори, съобщения, обяви и изпращане на отговори.

Google Gemini API: За всички AI функционалности – генериране на отговори и анализ на текст.

code
Mermaid
download
content_copy
expand_less

graph TD
    A[Потребител в браузър] --> B{Frontend (index.html @ GitHub Pages)};
    B --> |API Заявки (fetch)| C[Backend (worker.js @ Cloudflare)];
    C --> |OAuth2 & Partner API| D[OLX API];
    C --> |Генериране на текст| E[Google Gemini API];
    C <--> |Съхранение на токени/промпт| F[Cloudflare KV];
4. Инсталация и настройка

За да разгърнете и стартирате проекта, са необходими следните стъпки:

Необходими неща:

GitHub акаунт: За хостинг на index.html.

Cloudflare акаунт: За хостинг на worker.js.

OLX Partner API достъп: Client ID и Client Secret.

Google AI Studio достъп: Gemini API Key.

Стъпка 1: Настройка на Backend (Cloudflare Worker)

Създайте Worker: Влезте в Cloudflare, отидете в "Workers & Pages" и създайте нов Worker.

Поставете кода: Копирайте съдържанието на worker.js в редактора.

Създайте KV Namespace:

Отидете в Workers & Pages -> KV и създайте Namespace с име ТОЧНО OLX_TOKENS.

Свържете KV към Worker-а:

Върнете се в настройките на Worker-а (Settings -> Variables).

В секция KV Namespace Bindings, добавете връзка:

Variable name: OLX_TOKENS

KV namespace: OLX_TOKENS

Добавете Secrets (тайни ключове):

В същата секция Variables, под Environment Variables, добавете и криптирайте следните променливи:

OLX_CLIENT_ID: Вашият ID от OLX.

OLX_CLIENT_SECRET: Вашият таен ключ от OLX.

GEMINI_API_KEY: Вашият ключ от Google AI Studio.

Deploy: Запазете и разгърнете Worker-а.

Стъпка 2: Настройка на Frontend (GitHub Pages)

Създайте репозитори: Създайте ново публично репозитори в GitHub (напр. olx-dashboard).

Качете файла: Качете index.html в репозиторито.

Активирайте GitHub Pages:

В настройките на репозиторито (Settings -> Pages).

В секция Build and deployment, изберете Source: Deploy from a branch.

Изберете main клон и / (root) папка, след което запазете.

Ще получите URL адрес от вида https://your-username.github.io/olx-dashboard/.

Стъпка 3: Финална конфигурация в OLX

Влезте в контролния панел за разработчици на OLX.

Намерете вашето приложение.

В полето Redirect URI, поставете ТОЧНО URL адреса на вашия Worker, последван от /callback. Пример: https://your-worker-name.your-subdomain.workers.dev/callback.

В полето "линк за регулация" (Privacy Policy URL) можете да добавите линк към privacy.html файл в същото GitHub репозитори.

Стъпка 4: Първоначална оторизация

Отворете вашия GitHub Pages URL. Интерфейсът ще ви покаже грешка за оторизация. Кликнете на линка "Оторизирайте се отново", влезте в OLX и дайте съгласие. След това ще бъдете препратени обратно към интерфейса и системата ще заработи.

5. API на Worker-а

Worker-ът предоставя следните API пътища, които се използват от index.html:

Метод	Път	Описание	Тяло на заявката (JSON)
GET	/api/threads	Взима списък с последните 50 разговора.	-
GET	/api/threads/:id/messages	Взима всички съобщения за даден разговор.	-
POST	/api/threads/:id/send-message	Изпраща ново съобщение в даден разговор.	{ "text": "Вашето съобщение" }
POST	/api/broadcast	Изпраща съобщение до множество разговори.	{ "threadIds": [1,2,3], "text": "..." }
POST	/api/generate-reply	Генерира AI отговор за даден разговор.	{ "threadId": 123 }
POST	/api/analyze-thread	Задава въпрос на AI за даден разговор.	{ "threadId": 123, "question": "..." }
GET	/api/prompt	Взима текущия системен промпт от KV.	-
POST	/api/prompt	Записва нов системен промпт в KV.	{ "prompt": "Новият промпт..." }
6. Възможности за развитие

Проектът има голям потенциал за бъдещо развитие. Някои от възможните стъпки са:

Преструктуриране на Frontend: Разделяне на index.html на отделни style.css и script.js файлове за по-добра организация.

Система за статуси/тагове: Добавяне на възможност за маркиране на разговори с тагове (напр. "Нова поръчка", "Изпратен", "Рекламация") и филтриране по тях.

Търсене и филтриране: Добавяне на поле за търсене в разговорите по име на потребител или обява.

Подобрения в интерфейса: Добавяне на информация за обявата директно в списъка с разговори.

Real-time обновяване: Изследване на възможности за обновяване на разговорите в реално време (напр. чрез WebSockets), вместо с ръчно натискане на "Обнови".
